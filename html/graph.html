<html>
<head>
  <script type="text/javascript" src="./sigma.min.js" ></script>
  <script type="text/javascript" src="./graph-data.js" ></script>
  <script type="text/javascript">

    document.addEventListener("DOMContentLoaded", function(event) { 
      
      console.log('INITIALISING');

      var S     = new sigma('container');
      var graph = getGraph();

      // TAODEBUG:
      console.log(graph);

      // Render the graph with Sigma
      graph.vertices.forEach((v) => {
        S.graph.addNode({
          id:    v['@rid'],
          label: v.type=='topic' ? v.title : v.w,
          // x: 0,
          // y: 0,
          size:  v.type=='topic' ? 5 : 1,
          color: v.type=='topic' ? '#F00000' : '#F0F030'
        })
      })

      graph.edges.forEach((e) => {
        // TAOTODO:
      })

      // Draw the graph
      console.log('REDRAWING CANVAS');
      S.refresh();
    });

  </script>
</head>
<body style="width:100%;height:100%;margin:0;padding:0">
  <div id="container" style="width:100%;height:100%;margin:0;padding:0">
    <!-- -->
  </div>
</body>
</html>